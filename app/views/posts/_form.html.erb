<% if @post && @post.persisted? %>

<form action="<%= post_url(@post) %>" method="post">
  <input 
    type='hidden'
    name='_method'
    value='PATCH'>

<% else %>

<form action="<%= sub_posts_url %>" method="post">
  
<% end %>
  
  
  
  <input type="hidden" 
          name="authenticity_token" 
          value="<%= form_authenticity_token %>">
  <label for="post_title">  Post Title </label>
  <input 
    type="text" 
    id="post_title" 
    name="post[title]" 
    value="<%= @post.title %>">
  <br>
  
  <label for="post_content"> Content </label>
  <textarea 
    id="post_content" 
    name="post[content]" ><%= @post.content %></textarea>
  
  <label for="post_url"> Post url </label>
  <input 
    type="text" 
    id="post_url" 
    name="post[url]" 
    value=" <%= @post.url %>">
  
  <br>
  
  <label for="post_subs"> Post Subs </label>
  <% @subs.each do |sub| %>
  <input 
    type="checkbox"
    id="post_subs"
    name="post[sub_ids][]"
    value="<%= sub.id %>"
    <%= "checked" if @post.subs.include?(sub) %>>
    <%= sub.title %></label>
  <% end %>
  <input type="hidden" name="post[sub_ids][]" value= "">
  
  <input type="submit" value="Submit">
</form>